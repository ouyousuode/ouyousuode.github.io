---
layout: post
title: 面向对象编程
---
{{page.title}}
==================

编程语言传统上将世界分成两个部分，数据及对数据的操作。数据是静态的、不可变的，除了一些操作会改变它。操作于数据的过程和函数没有它们自己的可持续状态；它们的有用之处仅在于影响数据的能力。

当然，此种划分近于计算机工作的方式，因此它不是你可以轻易忽略或置之不理的。像物质与能量、名词和动词这种普遍的区别一样，它形成了我们工作的背景。在某种角度而言，所有的程序员必须设计他们的程序要用到的数据结构以及定义那些对数据采取措施的函数。

对像C这样的过程式编程语言来说，这些工作就是它的全部。这类语言可能会为组织数据和函数提供各种各样的支持，但是它不会有不同地划分世界的方式了。函数和数据结构是是设计的基本元素。

面向对象编程不过过分争论这种世界观，虽然会在更高层次重构它。它组织操作和数据到一个称为对象(object)的现代单元(unit)中，让你组织对象到结构化网络内以形成一个完整的程序。在一门面向对象编程语言中，对象及对象间的交互是设计的基本要素。

每个对象都有状态(数据)和行为(对数据的操作)。在这方面，它们与平常的物理世界对象没有太大差别。可非常容易地看到，比如手表或钢琴这样的机械设备如何表现它们的状态与行为。但是，被设计以完成某种工作的任意物体都是这么做的。甚至简单如没有移动部分的瓶子亦如此。将状态(是否满了，是否打开了)与行为(给不同容纳物分配流速的能力，被打开和关闭的能力，以及承受高温或低温的能力)结合起来。

此为真实事物的相似点。它们不仅可对真实系统的组件建模，而且可以完美地实现软件系统中被分配的角色。
### 接口与实现
作为人，我们经常面对各式各样需要搞清楚的事实与表象。基于此，我们不得不抽象出表面细节之下的基础结构，以发现组件们工作时的基本联系。抽象揭示起因和影响，揭露模式与框架，以及区分何为重要、何为无足轻重。抽象能力是理解力的根源。

为发明程序，你需要能够捕捉到相同种类的抽象以及以程序设计的方式表示它们。帮你完成这任务是编程语言的工作。此语言应促进发明与设计的过程，怎么促进呢？通过编码抽象that reveal the way things work。它让你专注于你写的代码。表面的细节不应该模糊你的程序架构。

所有的编程语言都提供帮助表达抽象的手段。大体上，这些手段是组织实现细节、隐藏细节以及提供实现细节的方式，至少从某种程度上讲，是一个通用接口——很像一个将接口与实现分离开来的机械装置。

<img src="/images/posts/2019-01-15/watch.jpeg">
作为实现者，从内部观察这样一个单元，你将关心的是它由何组成以及它如何工作。作为使用者，从外部观察它，你关心的仅仅是它是什么以及它能干什么。你可以忽略细节，仅在更高层次上考虑这些单元扮演的角色。

C语言中最主要的抽象单元是结构体和函数，此二者以不同的方式隐藏了实现的元素：
- 在世界的数据方面，C语言的结构体组织数据元素进更大的单元，它们可作为单一的实体被处理。尽管某些代码必须深入结构体内部并单独地处理这些数据域，但程序的大部分会将它看作一个单一的事物。它并非一个充满元素的集合，而是作为这些元素一起展现出的单一个体。一个结构体可以包含其它结构体，因此一个复杂的信息安排可构建自更简单的层级！
- 在现代C语言中，一个结构体的元素域居于它们自己的命名空间中。也就是说，它们的名字不会与数据结构外相同名字的数据元素发生冲突。为保持实现细节与接口的分离，划分程序的命名空间是必需的。比方说，想象这样一个艰巨的任务，在一个大型程序中给每一个数据赋予一个不同的名字并且保证这些新起的名字不与已有的名字发生冲突。
- 在世界的程式化方面，函数封装了可被重复使用而无须重新实现的行为。针对函数的局部元素，像结构体内的元素域一样，受保护于它们的命名空间。函数可以调用其它函数，因此确乎复杂的行为可构建自更小的行为片段。
- 函数是可重用的。一旦定义，它们可被调用任意次而无须再次考虑其实现。最常用到的有用函数可被收集进库(library)以重用于多种不同的应用。用户需要的所有条件仅是函数接口，而非源代码。然而，并不像数据元素，函数不能被切分成分离的命名空间。每个函数必须有一个独一无二的名字。虽然函数是可重用的，但是名字却不是这样。

C语言结构体和函数可以表达非常重要的抽象，但是它们维持着数据及对数据的操作二者间的区别。在过程式编程语言中，最高级的抽象单元仍居于“数据vs操作”中的一端。你设计的程序必须在最高层次上反映出计算机工作的方式。

面向对象编程语言不会丢掉结构体与函数的任何长处。但是，它们又往前走了一步，增加一个可抽象于更高层级的单元，此单元隐藏了函数与它的数据间的交互。

比方说，设想你有一组作用于一个特定数据结构的函数。你想使这些函数尽可能地易于使用，taking the structure out of the interface。因此你提供了一些额外的函数来管理这些数据。对此数据结构的所有操作包括：为它分配内存空间，初始化，自此处获取信息，修改它内部的值，保持它的值域一直最新，释放它(即回收内存空间)。这些工作均通过函数完成。用户需要做的所有工作仅是调用这些函数以及把数据结构传给它们。

有了这些改变，结构体就变成了其他程序员从不需一窥其内的不透明记号。他们可关注函数完成的事，而非数据是如何组织的。至此，你已朝创建对象迈了第一步。
